{"version":3,"file":"js/862.26ad280d.js","mappings":"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","sources":["webpack://weather/./src/views/WeatherPage.vue","webpack://weather/./src/views/WeatherPage.vue?b3d3"],"sourcesContent":["<template>\r\n  <the-preloader\r\n    v-if=\"isShow\"\r\n  >\r\n  </the-preloader>\r\n  <main class=\"main\" v-if=\"data\" v-cloak>\r\n    <div class=\"container\">\r\n      <header class=\"city__header\">\r\n        <router-link to=\"/\" class=\"city__link\">назад</router-link>\r\n        <div class=\"city__bookmark\" @click=\"addBookmark\" :class=\"{'active': isChecked, 'active': isBookmark()}\">\r\n          <svg width=\"14\" height=\"20\" viewBox=\"0 0 14 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n            <path d=\"M0 2.50004C0 1.83699 0.245833 1.20109 0.683417 0.732245C1.121 0.263396 1.71449 0 2.33333 0L11.6667 0C12.2855 0 12.879 0.263396 13.3166 0.732245C13.7542 1.20109 14 1.83699 14 2.50004V19.3753C13.9999 19.4884 13.9713 19.5993 13.917 19.6963C13.8628 19.7932 13.785 19.8726 13.692 19.926C13.599 19.9794 13.4942 20.0047 13.3888 19.9993C13.2834 19.9939 13.1813 19.958 13.0935 19.8953L7 16.3765L0.9065 19.8953C0.818656 19.958 0.716602 19.9939 0.611207 19.9993C0.505811 20.0047 0.401022 19.9794 0.307999 19.926C0.214977 19.8726 0.137205 19.7932 0.0829664 19.6963C0.028728 19.5993 5.45071e-05 19.4884 0 19.3753V2.50004ZM2.33333 1.25002C2.02391 1.25002 1.72717 1.38172 1.50838 1.61614C1.28958 1.85057 1.16667 2.16851 1.16667 2.50004V18.2078L6.67683 15.1052C6.77257 15.037 6.885 15.0006 7 15.0006C7.115 15.0006 7.22743 15.037 7.32317 15.1052L12.8333 18.2078V2.50004C12.8333 2.16851 12.7104 1.85057 12.4916 1.61614C12.2728 1.38172 11.9761 1.25002 11.6667 1.25002H2.33333Z\" fill=\"#8A91AB\"/>\r\n            <path class=\"city__bookmark-transparent\" d=\"M2.33333 1.25002C2.02391 1.25002 1.72717 1.38172 1.50838 1.61614C1.28958 1.85057 1.16667 2.16851 1.16667 2.50004V18.2078L6.67683 15.1052C6.77257 15.037 6.885 15.0006 7 15.0006C7.115 15.0006 7.22743 15.037 7.32317 15.1052L12.8333 18.2078V2.50004C12.8333 2.16851 12.7104 1.85057 12.4916 1.61614C12.2728 1.38172 11.9761 1.25002 11.6667 1.25002H2.33333Z\" fill=\"none\"/>\r\n          </svg>\r\n        </div>\r\n      </header>\r\n\r\n      <div class=\"city center\">\r\n        <h1 class=\"city__name\">{{ data.name }}</h1>\r\n        <div class=\"city__description\">{{ data.weather[0].description }}</div>\r\n        <div class=\"city__weather\">\r\n          <div class=\"city__weather-temperature\">{{ Math.round(data.main.temp) }}°</div>\r\n          <div class=\"city__weather-image\">\r\n            <img :src=\"require(`../assets/icons/${data.weather[0].main.toLowerCase()}.svg`)\" alt=\"weather icon\">\r\n          </div>\r\n        </div>\r\n        <div class=\"city__pressure\">\r\n          <span>\r\n            {{ data.main.pressure }} мм рт. ст.\r\n          </span>\r\n        </div>\r\n        <div class=\"city__sunset\">Закат в {{ getSunsetTime(data.sys.sunset) }}</div>\r\n      </div>\r\n    </div>\r\n  </main>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, ref } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport thePreloader from '../components/thePreloader'\r\n\r\nexport default {\r\n  name: \"WeatherPage\",\r\n  components: {\r\n    thePreloader,\r\n  },\r\n  setup() {\r\n    const apiKey = 'be7cfe8bd71367ae1b1667404762867e';\r\n    const route = useRoute();\r\n    const data = ref(null);\r\n    const isChecked = ref(false);\r\n    const isShow = ref(true);\r\n\r\n    async function getWeather() {\r\n      await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${route.params.id}&appid=${apiKey}&lang=ru&units=metric`)\r\n          .then(res => res.json())\r\n          .then(res => data.value = res)\r\n          .then(() => console.log(data))\r\n\r\n    }\r\n\r\n    function getSunsetTime(time) {\r\n      const sunsetTime = new Date(time * 1000)\r\n\r\n      if(sunsetTime.getMinutes() < 10 && sunsetTime.getHours() < 10) {\r\n        return `0${sunsetTime.getHours()}:0${sunsetTime.getMinutes()}`\r\n      } else if(sunsetTime.getHours() < 10) {\r\n        return `0${sunsetTime.getHours()}:${sunsetTime.getMinutes()}`\r\n      } else if(sunsetTime.getMinutes() < 10) {\r\n        return `${sunsetTime.getHours()}:0${sunsetTime.getMinutes()}`\r\n      }\r\n\r\n      return `${sunsetTime.getHours()}:${sunsetTime.getMinutes()}`\r\n    }\r\n\r\n    function addBookmark() {\r\n      isChecked.value = !isChecked.value;\r\n      if(isChecked.value) {\r\n        let arr = JSON.parse(localStorage.getItem('cities')) || [];\r\n        if(arr.length === 0) {\r\n          arr[0] = route.params.id;\r\n        } else {\r\n          arr.push(route.params.id);\r\n        }\r\n        localStorage.setItem('cities', JSON.stringify(arr));\r\n      } else {\r\n        let arr = JSON.parse(localStorage.getItem('cities')) || [];\r\n        arr.splice(arr.indexOf(route.params.id), 1);\r\n        localStorage.setItem('cities', JSON.stringify(arr));\r\n      }\r\n    }\r\n\r\n    function isBookmark() {\r\n      let arr = JSON.parse(localStorage.getItem('cities')) || [];\r\n      if(arr.indexOf(route.params.id) !== -1) {\r\n        console.log(arr.indexOf(route.params.id))\r\n        isChecked.value = true;\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    getWeather();\r\n\r\n    onMounted(() => isShow.value = false)\r\n\r\n    return {\r\n      isShow,\r\n      data,\r\n      getSunsetTime,\r\n      addBookmark,\r\n      isChecked,\r\n      isBookmark\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"sass\" scoped>\r\n.main\r\n  background: radial-gradient(80.36% 80.36% at 50% 0%, #5A607C 0%, #161B30 100%)\r\n  flex-grow: 1\r\n\r\n.city\r\n  margin: 28px 0 0\r\n  &__header\r\n    display: flex\r\n    justify-content: space-between\r\n    align-items: center\r\n    padding: 24px 0 0\r\n  &__link\r\n    position: relative\r\n    padding: 0 0 0 36px\r\n    color: #8A91AB\r\n    text-transform: capitalize\r\n    &::before\r\n      content: ''\r\n      position: absolute\r\n      top: -2px\r\n      left: 0\r\n      width: 24px\r\n      height: 24px\r\n      background-image: url('../assets/icons/arrow-left.svg')\r\n  &__bookmark\r\n    cursor: pointer\r\n    &.active\r\n      .city__bookmark-transparent\r\n        fill: #8A91AB\r\n  &__description\r\n    margin: 16px 0\r\n    text-transform: capitalize\r\n  &__weather\r\n    display: flex\r\n    justify-content: center\r\n    align-items: center\r\n    &-temperature\r\n      font-size: 130px\r\n      font-weight: 600\r\n      line-height: 1.1\r\n      background-image: linear-gradient(#fff 11.65%, hsla(0, 0%, 100%, 0) 139.47%)\r\n      -webkit-background-clip: text\r\n      -webkit-text-fill-color: transparent\r\n  &__pressure\r\n    margin: 40px 0 32px\r\n    span\r\n      position: relative\r\n      padding: 0 0 0 32px\r\n      &::before\r\n        content: ''\r\n        position: absolute\r\n        left: 0\r\n        top: -2px\r\n        width: 24px\r\n        height: 24px\r\n        background-image: url(\"../assets/icons/pressure.svg\")\r\n  &__sunset\r\n    color: #8A91AB\r\n</style>","import { render } from \"./WeatherPage.vue?vue&type=template&id=005766fa&scoped=true\"\nimport script from \"./WeatherPage.vue?vue&type=script&lang=js\"\nexport * from \"./WeatherPage.vue?vue&type=script&lang=js\"\n\nimport \"./WeatherPage.vue?vue&type=style&index=0&id=005766fa&lang=sass&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\Лёша\\\\Desktop\\\\web_works\\\\learn_vue\\\\weather\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-005766fa\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","width","height","viewBox","fill","xmlns","d","_hoisted_5","$setup","_createBlock","_component_the_preloader","key","_createElementBlock","_createVNode","_component_router_link","to","onClick","_toDisplayString","name","weather","description","Math","round","main","temp","src","require","toLowerCase","alt","pressure","sys","sunset","components","thePreloader","setup","apiKey","route","useRoute","data","ref","isChecked","isShow","async","getWeather","fetch","params","id","then","res","json","value","console","log","getSunsetTime","time","sunsetTime","Date","getMinutes","getHours","addBookmark","arr","JSON","parse","localStorage","getItem","length","push","setItem","stringify","splice","indexOf","isBookmark","onMounted","__exports__","render"],"sourceRoot":""}